>本文介绍使用virtualbox工具安装Ubuntu虚拟机，笔者选择使用22.04，理论上所有版本步骤都是一样。
>同时安装virtualbox增强功能，Ubuntu与Windows使用粘贴、拖拽、自动调整窗口大小、共享文件夹等功能。
>最后使用ssh让Windows上vscode能够连接Ubuntu及免密登录，这样就能在熟悉的win环境中开发Linux了
>本文宗旨是让小白也能看懂所以有些地方可能比价啰嗦可以选择合适章节观看

本文连接[Ubuntu22.04在virtualbox上安装并配置远程-CSDN博客](https://blog.csdn.net/biglonglong551/article/details/146298012?spm=1001.2014.3001.5501)
因为使用obsidian编辑，在gitee和github加载不出来图片，可以跳转CSDN博客查看

# 软件与镜像下载
## Ubuntu镜像下载
选择一些国内源下载会快一点，下面给出清华大学源下载地址
[Index of /ubuntu-releases/22.04/ | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/22.04/)
需要其他版本可以选择父目录去寻找
![[Ubuntu镜像.png]]
# virtualbox安装
直接官网下载最新的就可以，官网地址
[Downloads – Oracle VirtualBox](https://www.virtualbox.org/wiki/Downloads)
新版本可能对安装位置比较敏感，网上有一些更改安装位置教程，我这里嫌麻烦直接用的旧版，7.0.12
![[virtualbox版本.png]]
# 虚拟机安装
1. 打开virtualbox，选择新建
![[选择新建.png]]
2. **填写名称**自己随便这里使用ubuntu22,**选择使用的文件夹**，**选择虚拟光盘**是刚刚下载的镜像，最终我们的虚拟机存放在我们制定文件夹下的名字目录，像我这样配置就是`F:\Linux\Ubuntu\Ubuntu22`,并勾选跳过自动安装
![[虚拟机系统名称.png]]
3. **选择硬件**，选择合适的**内存和CPU**，太小会很卡，太大会让Windows变卡，不确定的可以照着笔者的来
![[选择硬件.png]]
4. 选择**虚拟硬盘**，这里分配100G，他不会直接占用你的磁盘空间，如果给小了后边Ubuntu下载东西太多就不够用了，所以可以大点给
![[选择虚拟硬盘.png]]
5. 点击完成，点击启动
![[点击启动.png]]
6. 进入虚拟机安装界面，点击捕获，然后直接回车下载
![[启动虚拟机.png]]
7. 选择中文简体，点击安装Ubuntu
![[选择语言.png]]
8. 点击继续
![[点击继续.png]]
9. 选择最小安装，点击继续
![[选择最小安装.png]]
10. 选择**清除整个磁盘**然后现在安装，对他来说磁盘是我们分配给他的文件夹，不用看着这个话语被吓住
![[清除整个磁盘.png]]
11. 点击继续
![[清磁盘警告.png]]
12. 选择上海时间(北京时间其实是根据东八区上海时间定的，所以这里很准确)，点击继续
![[选择时区.png]]
13. 填写登录信息姓名计算机名随便写，用户名会自动成为您的姓名，**密码尽量简短**后边需要频繁使用，可以使用1或1234之类的，勾选自动登录这样开机就不需要输入密码了，点击继续
![[填写登录信息.png]]
14. 接下来就是漫长的等待过程
![[等待安装.png]]
15. 安装完成，电机立即重启
![[立即重启.png]]
16. 遇到这个画面要敲一下回车，不要死等
![[重启敲回车.png]]
17. 这些东西有否的点否，有跳过点跳过就可以，不在赘述，到此系统就已经安装完成
![[跳过向导.png]]
## 玩机技巧
1. **切换中英文**，点击右上角的输入法图标切换输入法就能像我们Windows一样，按shift切换中英文
![[切换输入法.png]]
2. **将终端固定到收藏栏**，点击左下角全部应用将终端右键固定到收藏栏，这样我们每次就能快速启动他，当然开启终端有快捷键，看个人喜好这里不赘述
	![[将终端固定到收藏栏.png]]
3. 按照习惯**删掉这些没用的文件夹**，我们是在终端上开发不需要这些没用的目录，不用怕删掉桌面后就没显示了，删掉桌面桌面显示的就是我们的家目录`~/`也就是`/home/用户名/`
	输入如下命令：
	```shell
#当然在这里还没办法从Windows内容复制到Ubuntu去，手动敲一下吧
rm -rf 桌面 音乐 视频 文档 下载 模板  公共的 图片
```
![[删掉琐碎目录.png]]
4. 如果操作了后边增强功能启用共享文件夹后屏幕一直闪，可以尝试以下操作
在显示中启用硬件加速
![[启用硬件加速.png]]
5. 如果增强功能安装完还是用不了尝试以下操作
* 启用输入输出缓存
![[启用输入输出缓存.png]]
* 启用固态驱动器热插拔
![[启用热插拔.png]]
# 增强功能启用
想要让Ubuntu和Windows冲向剪切板、拖拽、共享文件夹、自动调整窗口大小等功能需要安装增强功能才能使用
## 安装增强功能
1. 点击设备，选择增强功能
![[点击增强功能.png]]
2. 点击完会在收藏栏有一个光盘图标，先不要着急点击他
![[增强功能图标.png]]
3. 安装增强功能所需要的包
```shell
sudo apt-get update
sudo apt-get upgrade
sudo apt install -y gcc make perl build-essential dkms
```
![[安装增强功能.png]]
4. 安装完成后点击刚才的光盘图标点击运行，如果没有反应就右键以终端打开，输入我下面的命令即可：
```shell
sudo ./VBoxLinuxAddition.run
```
或者`右键autorun.sh,作为程序运行`即可
![[运行增强功能.png]]
5. 打开相关功能，在设备将剪切板和拖拽设置为双向，`共享文件夹后面设置`
![[剪切板和拖拽.png]]
6. 在视图中选择自动调整窗口尺寸大小
![[自动调整窗口尺寸大小.png]]
7. 关机，不要重启
## 配合共享文件夹
1. 关机状态下，点击共享文件夹，选择一个Windows下文件夹用来和Linux公用，挂载点就选择自己的家目录，注意用户名用自己的
![[挂载共享文件夹.png]]
2. 开机后就能看到在桌面上有了我们的共享文件夹，但无论双击还是使用终端命令都无法打开文件夹
![[显示共享文件夹.png]]
3. 无法进入是因为文件夹所在的组不一样，使用管理员权限也不行，所以要将自己加入到vboxsf组中即可，谁又能给如下命令
```shell
sudo usermod -aG vboxsf $(whoami)
```
4. 然后重启虚拟机就可以进去了
# 远程连接
习惯了使用Windows下开发，可以使用ssh功能让Windows远程连接我们的Ubuntu
## Ubuntu下操作
1. 查看我们的ip地址
安装工具，就可以查看我们的ip地址
```shell
sudo apt install net-tools
```
通过`ifconfig`就可以查看ip地址，记住他后边要用
![[ip地址.png]]
2. 安装ssh工具并启用
```shell
sudo apt install openssh-server
sudo ufw allow ssh
sudo systemctl start ssh
```
3. 关机，配置端口转发，开机
![[端口转发.png]]
## Windows下操作
1. vscode插件下载
![[远程ssh插件.png]]
2. 安装完插件选择插件设置选择config文件
![[远程config打开.png]]
3. 填写如下内容,根据自己配置的来，host是随便写的，在vscode中显示的名字
```c
Host ubuntu22
  HostName 127.0.0.1
  Port 2222
  User luftmensch
```
4. 配置完就会在左侧出现host主机名字，点击箭头在当前窗口打开
5. 在弹出的弹窗中依次点击`linux-》继续-》你的密码`,就可以连接上了
![[完成远程连接.png]]
## 免密操作
当我们每次连接或者切换文件夹时候都需要输入密码，非常的麻烦，很容易把我们累死，下面操作教大家如何配置免密
1. 生成windows秘钥
打开Windows下powershell，输入`ssh-keygen`
后面问是否的全填`y`,其余一律`回车`
2. 完成上述操作会在我们Windows下的`C:\Users\用户名下\.ssh`右如下文件
![[ssh文件夹下内容.png]]
3. 使用记事本打开id_rsa.pub文件
4. 在ubuntu中创建.ssh目录并创建秘钥文件，使用**ctrl加鼠标左键点击文件名**就可以在vscode中打开
5. 将id_rsa.pub文件中的内容粘贴进去保存
6. 免密完成，这样我们每次切换打开的文件夹和重新连接时就不需要输入密码了